---
title: '内存与数据'
date: 2022-05-12 22:04:15
# 永久链接
permalink: '/memory/memorydata'
sidebar: 'auto'
isShowComment: true
categories:
 - memory
tags:
 - null
---



[toc]



# 内存与数据

## 什么是内存

>   内存主要就是用来存储数据用的。直白一点就是`c语言`的指针，其实就是进程的虚拟地址。

`C语言`的指针 = 内存地址【进程的虚拟地址】

```c
#include <stdio.h>
#include <stdlib.h>

int x = 10;

int main()
{
	printf("x=%d\r\n", x);
	printf("x=%p\r\n", &x);
	return 0;
}
```

```bash
# 编译
gcc demo1.c -o demo1

# 运行
./demo1

# 运行结果
x=10
x=0x601034
```

`0x601034`这个地址是`gcc`编译器分配的。改写代码之后再编译有可能会发生变化。



**存储器【内存空间】会被划分为若干个存储单元 ，每个存储单元从0开始编号，这个编号就是地址**



内存地址上存储的数据分为：数据 指令

数据：程序数据

指令：程序指令 指令码



```c
#include <stdio.h>
#include <stdlib.h>

int x = 10;

int test()
{
	return x;
}

int main()
{
	printf("x=%d\r\n", x);
	printf("x=%p\r\n", &x);

	printf("test=%p\r\n", test);
	return 0;
}
```

```bash
x=10
x=0x601034
test=0x40052d
```



使用命令`objdump -s demo2`

```bash
Contents of section .data:
 601030 00000000 0a000000
```

`601030`：代表含义，`data_start`，数据段起始地址，也称之为符号名、地址别名



| 内存地址 | 数据 | 10进制 |
| :------: | :--: | :----: |
|  601030  |  0   |   0    |
|  601031  |  0   |   0    |
|  601032  |  0   |   0    |
|  601033  |  0   |   0    |
|  601034  |  0a  |   10   |
|  601035  |  0   |   0    |
|  601036  |  0   |   0    |
|  601037  |  0   |   0    |
|  601038  |  0   |   0    |



使用`readelf -s demo2`命令查看起始地址

```bash
   47: 0000000000601030     0 NOTYPE  WEAK   DEFAULT   24 data_start
```

1.   虚拟地址`601034`的别名就是变量`x`
2.   虚拟地址有大小：`4Bytes`，存储的数据占据4个字节
3.   虚拟地址有数据/指令





`test`的虚拟地址

```bash
    64: 000000000040052d    12 FUNC    GLOBAL DEFAULT   13 test
```

1.   虚拟地址：`000000000040052d`它的别名为`test`，在高级语言中我们叫函数名`test`，
2.   它的存储的指令大小为12个字节



## 高级语言操作内存上的数据

1.   写数据

     ```c
     int x = 10;
     ```

     把这个值放到`601034`这个地址上面，我记不住，就起了一个地址别名为`x`，低级内存操作：`601034=0a`,是`int`类型，占4个字节，地址范围是`601034~601037`，所以内存地址也是有大小的，







