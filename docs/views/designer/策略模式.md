---
title: '策略模式'
date: 2021-11-30 18:37:15
# 永久链接
permalink: '/designer/strategy'
sidebar: 'auto'
isShowComment: true
categories:
 - designer
tags:
 - null
---



## 引入

>   假设一开始我们对一个`int`数组进行排序

```java
public class Sorter {

    /**
     * 选择排序
     * @param arr int[]
     */
    public static void sort(int[] arr) {
        for (int i = 0; i < arr.length - 1; i++) {
            int minPos = i;

            for (int j = i + 1; j < arr.length; j++) {
                minPos = arr[j] < arr[minPos] ? j : minPos;
            }

            swap(arr, i, minPos);
        }
    }

    // 进行交换
    static void swap(int[] arr, int i, int j) {
        int temp = arr[i];
        arr[i] = arr[j];
        arr[j] = temp;
    }
}

```

```java
public class Main {
    public static void main(String[] args) {
        int[] arr = new int[]{12, 22, 1121, 12};

        Sorter.sort(arr);
        System.out.println(Arrays.toString(arr));
    }
}
```



:::warning

但是，此时此刻，我们又需要进行`double`类型的数组进行排序。再写一个排序类么？但是如果不是一个可以进行数值比较的类型呢，如果是自定义的数据类型呢？**就需要去实现`compareTo`方法**

:::

```java
public class Cat {
    int weight, height;

    public Cat(int weight, int height) {
        this.weight = weight;
        this.height = height;
    }

    public int compareTo(Cat c) {
        if (this.weight < c.weight) return -1;
        else if (this.weight > c.weight) return 1;
        else return 0;
    }
}
```

```java
public class Sorter {

    /**
     * 选择排序
     * @param arr int[]
     */
    public static void sort(Cat[] arr) {
        for (int i = 0; i < arr.length - 1; i++) {
            int minPos = i;

            for (int j = i + 1; j < arr.length; j++) {
                minPos = arr[j].compareTo(arr[minPos]) == -1 ? j : minPos;
            }

            swap(arr, i, minPos);
        }
    }
    
    // 别的 sort(int[]) sort(double[]) ...

    static void swap(Cat[] arr, int i, int j) {
        Cat temp = arr[i];
        arr[i] = arr[j];
        arr[j] = temp;
    }
}
```

```java
public class Main {
    public static void main(String[] args) {
//        int[] arr = new int[]{12, 22, 1121, 12};

        Cat[] arr = {new Cat(3, 3), new Cat(5, 5), new Cat(2, 2)};

        Sorter.sort(arr);
        System.out.println(Arrays.toString(arr));
    }
}
```

```bash
[Cat{weight=2, height=2}, Cat{weight=3, height=3}, Cat{weight=5, height=5}]
```





