---
title: '多线程简介'
date: 2021-11-06 16:16:15
# 永久链接
permalink: '/java/thread/intro'
sidebar: 'auto'
isShowComment: true
categories:
 - java
tags:
 - Thread
---



## 多线程

生活中的案例：

>   原来公路是很窄的，慢慢因为车多了，道路堵塞，效率极低。
>
>   为了提高使用的效率，能够充分利用道路，于是加了多个车道。



### 普通方法调用和多线程

![普通方法执行](https://gitee.com/wxvirus/img/raw/master/img/20211106193339.png)



**多线程的方式**

![多线程执行方式](https://gitee.com/wxvirus/img/raw/master/img/20211106193626.png)





## 程序.进程.线程

>   在操作系统中运行的程序就是进程，比如你的QQ、播放器、游戏、IDE等等。。。

比如一个播放器是一个进程，它里面有多个线程，一个负责播放声音，一个负责展示图像，一个负责展示字幕。

![进程展示案例](https://gitee.com/wxvirus/img/raw/master/img/20211106194038.png)



---

**Process和Thread**

-   说到进程就得说下程序，程序是指令和数据的有序集合，其本身没有任何运行的含义，是一个静态的概念。
-   而进程则是执行程序的一次执行过程，它是一个动态的概念。是系统资源分配的单位。
-   通常在一个进程中可以包含若干个线程，当然一个进程至少有一个线程，不然没有存在的意义。线程是CPU调度和执行的单位。



:::warning

注意：很多多线程都是模拟出来的，真正的多线程是指有多个CPU，即多核，如服务器。如果是模拟出来的多线程，即在一个CPU的情况下，在同一时间点，CPU只能执行一个代码，因为切换的很快，所以就有同时执行的错觉。

:::



## 核心概念

-   线程就是独立的执行路径
-   在程序运行前，即使没有自己创建线程，后台也会有多个线程，如：主线程、gc线程
-   `main()`称之为主线程，为系统的入口，用于执行整个程序
-   在一个进程中，如果开辟了多个线程，线程运行由调度器安排调度，调度器是与操作系统紧密相关的，先后顺序是不能人为的干预的
-   对同一份资源操作时，会存在资源抢夺的问题，需要加入并发控制
-   线程会带来额外的开销，入CPU调度时间，并发控制开销
-   每个线程在自己的工作内存交互，内存控制不当会造成数据不一致
