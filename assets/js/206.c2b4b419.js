(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{764:function(s,t,a){"use strict";a.r(t);var e=a(4),v=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("[TOC]")]),s._v(" "),a("h1",{attrs:{id:"进程关系与守护进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程关系与守护进程"}},[s._v("#")]),s._v(" 进程关系与守护进程")]),s._v(" "),a("h2",{attrs:{id:"bash进程与终端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bash进程与终端"}},[s._v("#")]),s._v(" bash进程与终端")]),s._v(" "),a("h3",{attrs:{id:"什么是终端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是终端"}},[s._v("#")]),s._v(" 什么是终端?")]),s._v(" "),a("blockquote",[a("p",[s._v("计算有输入单元、主机【CPU、内存】、输出单元")])]),s._v(" "),a("p",[s._v("一般来说输入单元以键盘为例，输出单元我们一般认为是显示器[音频输出 - 音响设备]，"),a("span",{staticStyle:{color:"red"}},[s._v("一般我们将输入输出单元统称为终端。")]),s._v("也就是说终端，能产生数据，也能显示数据。")]),s._v(" "),a("ul",[a("li",[s._v("物理终端：传统的显示器和键盘【vga、usb接口】")]),s._v(" "),a("li",[s._v("软件终端[伪终端]：主要是通过"),a("code",[s._v("tcp/ip")]),s._v("协议实现的终端，它能模拟出来一个能实现数据输入和输出的终端，比如："),a("code",[s._v("ssh、telnet...")])]),s._v(" "),a("li",[s._v("只要能实现数据输入["),a("code",[s._v("read")]),s._v("、"),a("code",[s._v("write")]),s._v("]和数据输出的统称为终端")])]),s._v(" "),a("blockquote",[a("p",[s._v("在"),a("code",[s._v("linux")]),s._v("中有物理终端，也有伪终端，当我们通过"),a("code",[s._v("putty")]),s._v("工具登录的时候，底层协议走的是"),a("code",[s._v("tcp/ip")]),s._v("协议。")]),s._v(" "),a("p",[a("code",[s._v("sshd")]),s._v("通信步骤：")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("sshd")]),s._v("服务会打开一个"),a("code",[s._v("dev/ptmx")]),s._v("这个文件，它是一个伪终端主设备文件")]),s._v(" "),a("li",[a("code",[s._v("bin/bash")]),s._v("会打开有一个"),a("code",[s._v("dev/pts[0,1...]")]),s._v("它也是一个伪终端")])])]),s._v(" "),a("p",[a("code",[s._v("ptmx/ptsx")]),s._v("它们底层通过伪终端设备驱动程序模拟出输入和输出的功能。")]),s._v(" "),a("p",[a("code",[s._v("bin/bash")]),s._v("进程就可以实现数据读取和数据写入的功能。")]),s._v(" "),a("ul",[a("li",[s._v("输入单元"),a("code",[s._v("ssh客户端")])]),s._v(" "),a("li",[a("code",[s._v("/bin/bash")]),s._v("进程")]),s._v(" "),a("li",[s._v("输出["),a("code",[s._v("ssh")]),s._v("客户端]")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/4021/20171213082308503",alt:"terminal"}})]),s._v(" "),a("p",[s._v("引用：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/yazhouren/article/details/78793367",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.csdn.net/yazhouren/article/details/78793367"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("code",[s._v("bin/bash")]),s._v("主要是启动之后，对终端数据的读取和写入就是通过"),a("code",[s._v("pts")]),s._v("实现的【能实现标准输入和标准输出】")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("dev/pts0 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 标准输入 标准输出 标准错误\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("我们可以通过"),a("code",[s._v("strace")]),s._v("命令来查看追踪"),a("code",[s._v("sshd")]),s._v("服务")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/4021/20220512231918.png",alt:"strace"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("strace")]),s._v(" -f -s "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65500")]),s._v(" -o sshdx.log -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1590")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后我们再打开一个终端进行连接，输入密码等操作之后，可以看到监听的地方创建了很多进程")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/4021/20220512232056.png",alt:""}})]),s._v(" "),a("p",[s._v("然后我们在另外一个终端里输入一个"),a("code",[s._v("ls")]),s._v("命令，再把监听关掉，我们去查看生成的一个"),a("code",[s._v("sshdx.log")]),s._v("文件。")]),s._v(" "),a("p",[s._v("我这边可能"),a("code",[s._v("ctrl c")]),s._v("过早了，生成的数据可能不太全，还是得我们自己额外去查看日志文件的指令步骤，再结合上述的引用的图的结构去解析指令步骤。")])])}),[],!1,null,null,null);t.default=v.exports}}]);