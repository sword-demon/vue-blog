(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{616:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("a",{attrs:{href:"https://github.com/zeromicro/go-zero",target:"_blank",rel:"noopener noreferrer"}},[s._v("go-zero github 地址"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/zeromicro/go-zero/blob/master/readme-cn.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("中文介绍"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://go-zero.dev/cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("文档地址"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"安装goctl工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装goctl工具"}},[s._v("#")]),s._v(" 安装goctl工具")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Go 1.15 及之前版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GO111MODULE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOPROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://goproxy.cn/,direct go get -u github.com/zeromicro/go-zero/tools/goctl@latest\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Go 1.16 及以后版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOPROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://goproxy.cn/,direct go "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" github.com/zeromicro/go-zero/tools/goctl@latest\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# For Mac")]),s._v("\nbrew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" goctl\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker for amd64 architecture")]),s._v("\ndocker pull kevinwan/goctl\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# run goctl like")]),s._v("\ndocker run --rm -it -v "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(":/app kevinwan/goctl goctl --help\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker for arm64 (M1) architecture")]),s._v("\ndocker pull kevinwan/goctl:latest-arm64\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# run goctl like")]),s._v("\ndocker run --rm -it -v "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(":/app kevinwan/goctl:latest-arm64 goctl --help\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("安装结果验证")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("➜ goctl -v\ngoctl version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),s._v(".8 darwin/arm64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"},[s._v("windows用户")]),t("p",[t("code",[s._v("windows")]),s._v("用户需要自己添加环境变量")])]),t("h2",{attrs:{id:"安装protoc-protoc-gen-go"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装protoc-protoc-gen-go"}},[s._v("#")]),s._v(" 安装protoc & protoc-gen-go")]),s._v(" "),t("p",[s._v("安装方式文档上都有，这里搬一下")]),s._v(" "),t("h3",{attrs:{id:"方式1-goctl一键安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式1-goctl一键安装"}},[s._v("#")]),s._v(" 方式1：goctl一键安装")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ goctl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" check -i -f --verbose                                 \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": preparing to check "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": looking up "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc"')]),s._v(" is not found "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": preparing to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc"')]),s._v(" installed from cache\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc"')]),s._v(" is already installed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/keson/go/bin/protoc"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": looking up "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go"')]),s._v(" is not found "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": preparing to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go"')]),s._v(" installed from cache\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go"')]),s._v(" is already installed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/keson/go/bin/protoc-gen-go"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": looking up "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go-grpc"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go-grpc"')]),s._v(" is not found "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": preparing to "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go-grpc"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go-grpc"')]),s._v(" installed from cache\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"protoc-gen-go-grpc"')]),s._v(" is already installed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/keson/go/bin/protoc-gen-go-grpc"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("goctl-env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": congratulations"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" your goctl environment is ready"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h3",{attrs:{id:"方式2-homebrew"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式2-homebrew"}},[s._v("#")]),s._v(" 方式2：HomeBrew")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ brew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" protobuf protoc-gen-go protoc-gen-go-grpc\n$ protoc --version\nlibprotoc x.x.x\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"方式3-源文件安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式3-源文件安装"}},[s._v("#")]),s._v(" 方式3：源文件安装")]),s._v(" "),t("h4",{attrs:{id:"proto安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#proto安装"}},[s._v("#")]),s._v(" proto安装")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("进入"),t("a",{attrs:{href:"https://github.com/protocolbuffers/protobuf/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("protobuf release"),t("OutboundLink")],1),s._v(" 页面，选择适合自己操作系统的压缩包文件")])]),s._v(" "),t("li",[t("p",[s._v("解压"),t("code",[s._v("protoc-x.x.x-osx-x86_64.zip")]),s._v("并进入"),t("code",[s._v("protoc-x.x.x-osx-x86_64")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" protoc-x.x.x-osx-x86_64/bin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("将启动的"),t("code",[s._v("protoc")]),s._v("二进制文件移动到被添加到环境变量的任意path下，如"),t("code",[s._v("$GOPATH/bin")]),s._v("，这里不建议直接将其和系统的以下path放在一起。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" protoc "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GOPATH")]),s._v("/bin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[t("code",[s._v("$GOPATH")]),s._v("为你本机的实际文件夹地址")])])]),s._v(" "),t("li",[t("p",[s._v("验证安装结果")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("➜ protoc --version\nlibprotoc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.15")]),s._v(".6\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"proto-gen-go-proto-gen-go-grpc安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#proto-gen-go-proto-gen-go-grpc安装"}},[s._v("#")]),s._v(" Proto-gen-go/proto-gen-go-grpc安装")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("下载安装"),t("code",[s._v("protoc-gen-go")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("go "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" google.golang.org/protobuf/cmd/protoc-gen-go@latest\ngo "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"一些常用的goctl脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一些常用的goctl脚本"}},[s._v("#")]),s._v(" 一些常用的"),t("code",[s._v("goctl")]),s._v("脚本")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/Mikaelemmmm/go-zero-looklook/blob/main/deploy/script/gencode/gen.sh",target:"_blank",rel:"noopener noreferrer"}},[s._v("大佬提供的地址"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# 生成api业务代码 ， 进入"服务/cmd/api/desc"目录下，执行下面命令\n# goctl api go -api *.api -dir ../  --style=goZero\n\n# 生成rpc业务代码\n# 【注】 需要安装下面3个插件\n#       protoc >= 3.13.0 ， 如果没安装请先安装 https://github.com/protocolbuffers/protobuf，下载解压到$GOPATH/bin下即可，前提是$GOPATH/bin已经加入$PATH中\n#       protoc-gen-go ，如果没有安装请先安装 go install google.golang.org/protobuf/cmd/protoc-gen-go@latest\n#       protoc-gen-go-grpc  ，如果没有安装请先安装 go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest\n#\n#       如果有要使用grpc-gateway，也请安装如下两个插件 , 没有使用就忽略下面2个插件\n#       go install github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-grpc-gateway@latest\n#       go install github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-openapiv2@latest\n#\n# 1）goctl >= 1.3 进入"服务/cmd/rpc/pb"目录下，执行下面命令\n#    goctl rpc protoc *.proto --go_out=../ --go-grpc_out=../  --zrpc_out=../ --style=goZero\n#    去除proto中的json的omitempty\n#    mac: sed -i "" \'s/,omitempty//g\' *.pb.go\n#    linux: sed -i \'s/,omitempty//g\' *.pb.go\n# 2）goctl < 1.3 进入"服务/cmd"目录下，执行下面命令\n#    goctl rpc proto -src rpc/pb/*.proto -dir ./rpc --style=goZero\n#    去除proto中的json的omitempty\n#    mac: sed -i "" \'s/,omitempty//g\'  ./rpc/pb/*.pb.go\n#    linux: sed -i \'s/,omitempty//g\'  ./rpc/pb/*.pb.go\n\n\n\n# 创建kafka的topic\n# kafka-topics.sh --create --zookeeper zookeeper:2181 --replication-factor 1 -partitions 1 --topic {topic}\n# 查看消费者组情况\n# kafka-consumer-groups.sh --bootstrap-server kafka:9092 --describe --group {group}\n# 命令行消费\n# ./kafka-console-consumer.sh  --bootstrap-server kafka:9092  --topic looklook-log   --from-beginning\n# 命令生产\n# ./kafka-console-producer.sh --bootstrap-server kafka:9092 --topic second\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("➜ goctl -h\nA cli tool to generate api, zrpc, model code\n\nUsage:\n  goctl "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nAvailable Commands:\n  api         Generate api related files\n  bug         Report a bug\n  completion  Generate the autocompletion script "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the specified shell\n  docker      Generate Dockerfile\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v("         Check or edit goctl environment\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("        Help about any "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v("\n  kube        Generate kubernetes files\n  migrate     Migrate from tal-tech to zeromicro\n  model       Generate model code\n  quickstart  quickly start a project\n  rpc         Generate rpc code\n  template    Template operation\n  upgrade     Upgrade goctl to latest version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"api语法介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api语法介绍"}},[s._v("#")]),s._v(" api语法介绍")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://go-zero.dev/cn/docs/design/grammar",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网地址"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("code",[s._v("user.api")]),s._v("使用案例")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * api语法示例及语法说明\n */")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// api语法版本")]),s._v("\nsyntax "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    author"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"wxvirus"')]),s._v("\n    date"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2022-06-12"')]),s._v("\n    desc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"api语法示例及语法说明"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tUserInfoReq "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tUserId "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"userId"`')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\tUserInfoResp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tUserId "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"userId"`')]),s._v("\n\t\tNickname "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"nickname"`')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nservice user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("api"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    @doc "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"获取用户信息"')]),s._v("\n    @handler userInfo\n    post "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("info "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UserInfoReq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" returns "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UserInfoResp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("p",[s._v("生成的话，我们那可以使用"),t("code",[s._v("alias")]),s._v("来简写")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ~/.zshrc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("apigen")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"goctl api go -api *.api -dir ../  --style=goZero"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("保存之后使之生效："),t("code",[s._v("source ~/.zshrc")])]),s._v(" "),t("p",[s._v("默认使用示例，进入到对应目录")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("➜ goctl api go -api *.api -dir "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/  --style"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("goZero  \nDone.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/4021/20220612104801.png",alt:"生成代码内容"}})]),s._v(" "),t("p",[s._v("然后可以直接进入根目录使用命令下载依赖了")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("go mod tidy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这样会自动帮你下载"),t("code",[s._v("go-zero")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://gocn.vip/topics/xQJ3X6cbwY",target:"_blank",rel:"noopener noreferrer"}},[s._v("最简单的Go Dockerfile编写姿势"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("➜ goctl docker -go user.go                        \nHint: run "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker build ..."')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" dir:\n    /Users/wangxin/GolangProjects/src/github.com/sword-demon/zero-demo\nDone.\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("a",{attrs:{href:"https://gocn.vip/topics/rw8KO7cXQG",target:"_blank",rel:"noopener noreferrer"}},[s._v("最简单的K8S部署文件编写姿势"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("➜ goctl kube deploy -name user-api -namespace go-zero-demo -image user-api:v1.0 -o user-api.yaml -port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" -nodePort "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31001")]),s._v("\nDone.\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"编写rpc实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编写rpc实例"}},[s._v("#")]),s._v(" 编写rpc实例")]),s._v(" "),t("p",[t("code",[s._v("zero-demo/user-rpc/pb")])]),s._v(" "),t("div",{staticClass:"language-protobuf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-protobuf"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("syntax")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"proto3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  这个现在必须写 而且还得带点路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),s._v(" go_package "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./pb"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" pb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("message")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetUserInfoReq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v("  id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("message")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetUserInfoResp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v(" nickname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//service")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("service")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("usercenter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rpc")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserInfo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetUserInfoReq")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetUserInfoResp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("生成代码的话，我们还是使用"),t("code",[s._v("alias")]),s._v("去添加快捷方式")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rpcgen")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"goctl rpc protoc *.proto --go_out=../ --go-grpc_out=../  --zrpc_out=../ --style=goZeros"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("➜ rpcgen\nDone.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/4021/20220612112931.png",alt:"生成的代码"}})]),s._v(" "),t("h3",{attrs:{id:"快速生成模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快速生成模型"}},[s._v("#")]),s._v(" 快速生成模型")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用方法：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./genModel.sh usercenter user")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./genModel.sh usercenter user_auth")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再将./genModel下的文件剪切到对应服务的model目录里面，记得改package")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#生成的表名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tables")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表生成的genmodel目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("modeldir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./genModel\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dbname")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("looklook_"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("passwd")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"开始创建库：'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$dbname")]),s._v(" 的表："),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v('"')]),s._v("\ngoctl model mysql datasource -url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${username}")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${passwd}")]),s._v("@tcp("),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${host}")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v(")/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${dbname}")]),s._v('"')]),s._v(" -table"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${tables}")]),s._v('"')]),s._v("  -dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${modeldir}")]),s._v('"')]),s._v(" -cache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true --style"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("goZero\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("➜ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" genModel.sh order homestay_order\n开始创建库：looklook_order 的表：homestay_order\nDone.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("a",{attrs:{href:"https://github.com/Mikaelemmmm/go-zero-looklook/blob/main/deploy/sql/looklook_order.sql",target:"_blank",rel:"noopener noreferrer"}},[s._v("sql资源地址"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"安装go-zero"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装go-zero"}},[s._v("#")]),s._v(" 安装go-zero")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GO111MODULE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOPROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://goproxy.cn/,direct go get -u github.com/zeromicro/go-zero\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);