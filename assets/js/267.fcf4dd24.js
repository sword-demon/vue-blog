(window.webpackJsonp=window.webpackJsonp||[]).push([[267],{819:function(s,a,e){"use strict";e.r(a);var t=e(4),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"下载安装redis镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载安装redis镜像"}},[s._v("#")]),s._v(" 下载安装redis镜像")]),s._v(" "),e("p",[s._v("首先切换到"),e("code",[s._v("root")]),s._v("用户，不然每次都要"),e("code",[s._v("sudo")])]),s._v(" "),e("p",[s._v("下载"),e("code",[s._v("redis")]),s._v("的最新镜像")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker pull redis\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("默认拉取"),e("code",[s._v("latest")]),s._v("版本")]),s._v(" "),e("h2",{attrs:{id:"启动redis实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动redis实例"}},[s._v("#")]),s._v(" 启动redis实例")]),s._v(" "),e("blockquote",[e("p",[s._v("运行redis实例并映射端口和挂载目录")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker run -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(":6379 --name redis -v /mydata/redis/data:/data "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d redis redis-server /etc/redis/redis.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"title"},[s._v("配置文件")]),e("p",[s._v("启动"),e("code",[s._v("redis")]),s._v("容器读取该配置文件运行的时候，有时候，容器内部"),e("code",[s._v("/etc/redis")]),s._v("只会到这个目录，所以我们需要在本机创建出挂载目录里的对应"),e("code",[s._v("redis.conf")]),s._v("文件，以便于容器里也对应同步配置文件存在。")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /mydata/redis/conf\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /mydata/redis/conf/redis.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"title"},[s._v("建议")]),e("p",[e("strong",[s._v("先创建文件，再去执行运行命令")])])]),e("h2",{attrs:{id:"测试使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试使用"}},[s._v("#")]),s._v(" 测试使用")]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v("docker")]),s._v("命令执行"),e("code",[s._v("redis-cli")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it redis redis-cli\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这样可以进入"),e("code",[s._v("redis-cli")]),s._v("的命令行")]),s._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"title"},[s._v("持久化")]),e("p",[s._v("这样进入"),e("code",[s._v("redis-cli")]),s._v("，"),e("code",[s._v("set")]),s._v("一个字符串之后，重启数据就会消失，所以我们还需要配置持久化。")])]),e("blockquote",[e("p",[s._v("让"),e("code",[s._v("redis")]),s._v("启动"),e("code",[s._v("aof")]),s._v("的持久化方式")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /mydata/redis/conf/redis.conf\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 找到 appendonly 默认为注释的")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改为如下内容")]),s._v("\nappendonly "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最后进行保存退出")]),s._v("\nesc :wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("配置完毕之后，重启"),e("code",[s._v("redis")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker restart redis\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("重新连接"),e("code",[s._v("redis-cli")]),s._v("测试数据。")]),s._v(" "),e("h2",{attrs:{id:"redis的整个配置文件可以配置什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis的整个配置文件可以配置什么"}},[s._v("#")]),s._v(" redis的整个配置文件可以配置什么")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://raw.githubusercontent.com/antirez/redis/4.0/redis.conf",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://raw.githubusercontent.com/antirez/redis/4.0/redis.conf"),e("OutboundLink")],1)]),s._v(" "),e("h2",{attrs:{id:"配置自动启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置自动启动"}},[s._v("#")]),s._v(" 配置自动启动")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker update redis --restart"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);