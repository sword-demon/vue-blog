<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Django restframework快速上手 | wxvirus</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/vue-blog/logo.jpg">
    <script src="/vue-blog/assets/js/jq3.5.1.js"></script>
    <script src="/vue-blog/assets/js/mouse.js"></script>
    <meta name="description" content="纯粹的浪荡人士与抱定决心干大事的人，面相是截然不同的。">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="robots" content="all">
    <meta name="author" content="CHANX">
    <meta name="keywords" content="wxvirus,virusblog,无解的博客,后端,运维,blog,vuepress-blog">
    
    <link rel="preload" href="/vue-blog/assets/css/0.styles.92d18fa1.css" as="style"><link rel="preload" href="/vue-blog/assets/js/app.f1f1676c.js" as="script"><link rel="preload" href="/vue-blog/assets/js/4.cb98655f.js" as="script"><link rel="preload" href="/vue-blog/assets/js/1.5cf0eecc.js" as="script"><link rel="preload" href="/vue-blog/assets/js/219.d7169c24.js" as="script"><link rel="prefetch" href="/vue-blog/assets/js/10.a9a0482f.js"><link rel="prefetch" href="/vue-blog/assets/js/100.bc2d3e0d.js"><link rel="prefetch" href="/vue-blog/assets/js/101.e5146912.js"><link rel="prefetch" href="/vue-blog/assets/js/102.6578789e.js"><link rel="prefetch" href="/vue-blog/assets/js/103.7c5878a7.js"><link rel="prefetch" href="/vue-blog/assets/js/104.3ad3ec94.js"><link rel="prefetch" href="/vue-blog/assets/js/105.94371bdf.js"><link rel="prefetch" href="/vue-blog/assets/js/106.e8d96973.js"><link rel="prefetch" href="/vue-blog/assets/js/107.0190dcd2.js"><link rel="prefetch" href="/vue-blog/assets/js/108.45722a27.js"><link rel="prefetch" href="/vue-blog/assets/js/109.c797c56d.js"><link rel="prefetch" href="/vue-blog/assets/js/11.162149c6.js"><link rel="prefetch" href="/vue-blog/assets/js/110.aab67bd7.js"><link rel="prefetch" href="/vue-blog/assets/js/111.2d364a63.js"><link rel="prefetch" href="/vue-blog/assets/js/112.bc0b63ac.js"><link rel="prefetch" href="/vue-blog/assets/js/113.b580adaa.js"><link rel="prefetch" href="/vue-blog/assets/js/114.5e2452c3.js"><link rel="prefetch" href="/vue-blog/assets/js/115.01f51450.js"><link rel="prefetch" href="/vue-blog/assets/js/116.1a4cd8ba.js"><link rel="prefetch" href="/vue-blog/assets/js/117.21d52772.js"><link rel="prefetch" href="/vue-blog/assets/js/118.66b8edde.js"><link rel="prefetch" href="/vue-blog/assets/js/119.b93188eb.js"><link rel="prefetch" href="/vue-blog/assets/js/12.7749f0b9.js"><link rel="prefetch" href="/vue-blog/assets/js/120.e41eae9e.js"><link rel="prefetch" href="/vue-blog/assets/js/121.8bd3d5c3.js"><link rel="prefetch" href="/vue-blog/assets/js/122.4dc8a580.js"><link rel="prefetch" href="/vue-blog/assets/js/123.f3907de3.js"><link rel="prefetch" href="/vue-blog/assets/js/124.3b97d825.js"><link rel="prefetch" href="/vue-blog/assets/js/125.9517ee1c.js"><link rel="prefetch" href="/vue-blog/assets/js/126.8fcc09c0.js"><link rel="prefetch" href="/vue-blog/assets/js/127.40c1fc1f.js"><link rel="prefetch" href="/vue-blog/assets/js/128.7dd87468.js"><link rel="prefetch" href="/vue-blog/assets/js/129.92acb150.js"><link rel="prefetch" href="/vue-blog/assets/js/13.f64e67a7.js"><link rel="prefetch" href="/vue-blog/assets/js/130.fa958258.js"><link rel="prefetch" href="/vue-blog/assets/js/131.7dd321d2.js"><link rel="prefetch" href="/vue-blog/assets/js/132.381d10c8.js"><link rel="prefetch" href="/vue-blog/assets/js/133.a730034e.js"><link rel="prefetch" href="/vue-blog/assets/js/134.9d80de7b.js"><link rel="prefetch" href="/vue-blog/assets/js/135.6770f595.js"><link rel="prefetch" href="/vue-blog/assets/js/136.8c3008c2.js"><link rel="prefetch" href="/vue-blog/assets/js/137.cfabc959.js"><link rel="prefetch" href="/vue-blog/assets/js/138.ecc8f768.js"><link rel="prefetch" href="/vue-blog/assets/js/139.fb09fe72.js"><link rel="prefetch" href="/vue-blog/assets/js/14.4f70094a.js"><link rel="prefetch" href="/vue-blog/assets/js/140.5ee2169f.js"><link rel="prefetch" href="/vue-blog/assets/js/141.d547e896.js"><link rel="prefetch" href="/vue-blog/assets/js/142.b9b11d94.js"><link rel="prefetch" href="/vue-blog/assets/js/143.4c09f5c5.js"><link rel="prefetch" href="/vue-blog/assets/js/144.30ea853f.js"><link rel="prefetch" href="/vue-blog/assets/js/145.b90b26fc.js"><link rel="prefetch" href="/vue-blog/assets/js/146.261eeae4.js"><link rel="prefetch" href="/vue-blog/assets/js/147.c85eab47.js"><link rel="prefetch" href="/vue-blog/assets/js/148.fc987f20.js"><link rel="prefetch" href="/vue-blog/assets/js/149.114de8d8.js"><link rel="prefetch" href="/vue-blog/assets/js/15.66d1a816.js"><link rel="prefetch" href="/vue-blog/assets/js/150.a655952e.js"><link rel="prefetch" href="/vue-blog/assets/js/151.8160f174.js"><link rel="prefetch" href="/vue-blog/assets/js/152.92c8b763.js"><link rel="prefetch" href="/vue-blog/assets/js/153.83a3e3a4.js"><link rel="prefetch" href="/vue-blog/assets/js/154.aa7e1f78.js"><link rel="prefetch" href="/vue-blog/assets/js/155.a693badb.js"><link rel="prefetch" href="/vue-blog/assets/js/156.d5e45196.js"><link rel="prefetch" href="/vue-blog/assets/js/157.b3d210db.js"><link rel="prefetch" href="/vue-blog/assets/js/158.428919b3.js"><link rel="prefetch" href="/vue-blog/assets/js/159.4a356292.js"><link rel="prefetch" href="/vue-blog/assets/js/16.70a134e4.js"><link rel="prefetch" href="/vue-blog/assets/js/160.300170a8.js"><link rel="prefetch" href="/vue-blog/assets/js/161.322533d3.js"><link rel="prefetch" href="/vue-blog/assets/js/162.840efc71.js"><link rel="prefetch" href="/vue-blog/assets/js/163.a86d502f.js"><link rel="prefetch" href="/vue-blog/assets/js/164.df5b5cf4.js"><link rel="prefetch" href="/vue-blog/assets/js/165.bc8fd789.js"><link rel="prefetch" href="/vue-blog/assets/js/166.7165f4b8.js"><link rel="prefetch" href="/vue-blog/assets/js/167.243e8cc8.js"><link rel="prefetch" href="/vue-blog/assets/js/168.9ed9a93e.js"><link rel="prefetch" href="/vue-blog/assets/js/169.921cd403.js"><link rel="prefetch" href="/vue-blog/assets/js/17.1382de84.js"><link rel="prefetch" href="/vue-blog/assets/js/170.4cac267e.js"><link rel="prefetch" href="/vue-blog/assets/js/171.f61a4929.js"><link rel="prefetch" href="/vue-blog/assets/js/172.4ec16b8d.js"><link rel="prefetch" href="/vue-blog/assets/js/173.1c24879b.js"><link rel="prefetch" href="/vue-blog/assets/js/174.43c3c6a1.js"><link rel="prefetch" href="/vue-blog/assets/js/175.82a3fee3.js"><link rel="prefetch" href="/vue-blog/assets/js/176.bf945b96.js"><link rel="prefetch" href="/vue-blog/assets/js/177.3a11e267.js"><link rel="prefetch" href="/vue-blog/assets/js/178.cb5172d3.js"><link rel="prefetch" href="/vue-blog/assets/js/179.920ace27.js"><link rel="prefetch" href="/vue-blog/assets/js/18.e1eb50b4.js"><link rel="prefetch" href="/vue-blog/assets/js/180.cc259c0b.js"><link rel="prefetch" href="/vue-blog/assets/js/181.3b5b9616.js"><link rel="prefetch" href="/vue-blog/assets/js/182.775b312a.js"><link rel="prefetch" href="/vue-blog/assets/js/183.c0d0c277.js"><link rel="prefetch" href="/vue-blog/assets/js/184.0d0dfa93.js"><link rel="prefetch" href="/vue-blog/assets/js/185.c5d5fc70.js"><link rel="prefetch" href="/vue-blog/assets/js/186.61c7281d.js"><link rel="prefetch" href="/vue-blog/assets/js/187.9d0df972.js"><link rel="prefetch" href="/vue-blog/assets/js/188.a24408cb.js"><link rel="prefetch" href="/vue-blog/assets/js/189.af3e8ff7.js"><link rel="prefetch" href="/vue-blog/assets/js/19.77486248.js"><link rel="prefetch" href="/vue-blog/assets/js/190.aefd1140.js"><link rel="prefetch" href="/vue-blog/assets/js/191.9ba8e4fb.js"><link rel="prefetch" href="/vue-blog/assets/js/192.cf68d570.js"><link rel="prefetch" href="/vue-blog/assets/js/193.7ed07446.js"><link rel="prefetch" href="/vue-blog/assets/js/194.c53004d5.js"><link rel="prefetch" href="/vue-blog/assets/js/195.3b59fc4b.js"><link rel="prefetch" href="/vue-blog/assets/js/196.58ba2536.js"><link rel="prefetch" href="/vue-blog/assets/js/197.ef58074c.js"><link rel="prefetch" href="/vue-blog/assets/js/198.50a04277.js"><link rel="prefetch" href="/vue-blog/assets/js/199.88777870.js"><link rel="prefetch" href="/vue-blog/assets/js/20.b1f9fed9.js"><link rel="prefetch" href="/vue-blog/assets/js/200.7a590444.js"><link rel="prefetch" href="/vue-blog/assets/js/201.c3eedb6a.js"><link rel="prefetch" href="/vue-blog/assets/js/202.84f47672.js"><link rel="prefetch" href="/vue-blog/assets/js/203.9981f177.js"><link rel="prefetch" href="/vue-blog/assets/js/204.b7bfb078.js"><link rel="prefetch" href="/vue-blog/assets/js/205.0ab08f18.js"><link rel="prefetch" href="/vue-blog/assets/js/206.c2b4b419.js"><link rel="prefetch" href="/vue-blog/assets/js/207.bbc5bd93.js"><link rel="prefetch" href="/vue-blog/assets/js/208.e021cd37.js"><link rel="prefetch" href="/vue-blog/assets/js/209.a3402667.js"><link rel="prefetch" href="/vue-blog/assets/js/21.9211cf66.js"><link rel="prefetch" href="/vue-blog/assets/js/210.15ba7955.js"><link rel="prefetch" href="/vue-blog/assets/js/211.62691fee.js"><link rel="prefetch" href="/vue-blog/assets/js/212.4b351a4f.js"><link rel="prefetch" href="/vue-blog/assets/js/213.35646fc2.js"><link rel="prefetch" href="/vue-blog/assets/js/214.0858b62a.js"><link rel="prefetch" href="/vue-blog/assets/js/215.b92a164b.js"><link rel="prefetch" href="/vue-blog/assets/js/216.11060415.js"><link rel="prefetch" href="/vue-blog/assets/js/217.bf78e825.js"><link rel="prefetch" href="/vue-blog/assets/js/218.805e3dd3.js"><link rel="prefetch" href="/vue-blog/assets/js/22.9b8ab62f.js"><link rel="prefetch" href="/vue-blog/assets/js/220.a4192cde.js"><link rel="prefetch" href="/vue-blog/assets/js/221.bef0e31b.js"><link rel="prefetch" href="/vue-blog/assets/js/222.2e39b442.js"><link rel="prefetch" href="/vue-blog/assets/js/223.ad89280d.js"><link rel="prefetch" href="/vue-blog/assets/js/224.9a431281.js"><link rel="prefetch" href="/vue-blog/assets/js/225.cea195ca.js"><link rel="prefetch" href="/vue-blog/assets/js/226.8e4587f2.js"><link rel="prefetch" href="/vue-blog/assets/js/227.bd14e1d1.js"><link rel="prefetch" href="/vue-blog/assets/js/228.67214331.js"><link rel="prefetch" href="/vue-blog/assets/js/229.cdbb3d8b.js"><link rel="prefetch" href="/vue-blog/assets/js/23.6984103f.js"><link rel="prefetch" href="/vue-blog/assets/js/230.1739de2e.js"><link rel="prefetch" href="/vue-blog/assets/js/231.3beeda13.js"><link rel="prefetch" href="/vue-blog/assets/js/232.76f61dbe.js"><link rel="prefetch" href="/vue-blog/assets/js/233.9e839ed6.js"><link rel="prefetch" href="/vue-blog/assets/js/234.6485adda.js"><link rel="prefetch" href="/vue-blog/assets/js/235.629dcad3.js"><link rel="prefetch" href="/vue-blog/assets/js/236.217a96d4.js"><link rel="prefetch" href="/vue-blog/assets/js/237.fd227c70.js"><link rel="prefetch" href="/vue-blog/assets/js/238.4d312053.js"><link rel="prefetch" href="/vue-blog/assets/js/239.d9b9a0ae.js"><link rel="prefetch" href="/vue-blog/assets/js/24.0c1331e0.js"><link rel="prefetch" href="/vue-blog/assets/js/240.e849620a.js"><link rel="prefetch" href="/vue-blog/assets/js/241.be56b6dd.js"><link rel="prefetch" href="/vue-blog/assets/js/242.50a2af52.js"><link rel="prefetch" href="/vue-blog/assets/js/243.39ec6ef4.js"><link rel="prefetch" href="/vue-blog/assets/js/244.4852cda4.js"><link rel="prefetch" href="/vue-blog/assets/js/245.41634bfa.js"><link rel="prefetch" href="/vue-blog/assets/js/246.198603e0.js"><link rel="prefetch" href="/vue-blog/assets/js/247.328599fa.js"><link rel="prefetch" href="/vue-blog/assets/js/248.f2bb95f6.js"><link rel="prefetch" href="/vue-blog/assets/js/249.f20ce750.js"><link rel="prefetch" href="/vue-blog/assets/js/25.eddfc3cf.js"><link rel="prefetch" href="/vue-blog/assets/js/250.a7ca50f0.js"><link rel="prefetch" href="/vue-blog/assets/js/251.b0535c5f.js"><link rel="prefetch" href="/vue-blog/assets/js/252.0a83d714.js"><link rel="prefetch" href="/vue-blog/assets/js/253.5e65c80e.js"><link rel="prefetch" href="/vue-blog/assets/js/254.2e314141.js"><link rel="prefetch" href="/vue-blog/assets/js/255.3a340878.js"><link rel="prefetch" href="/vue-blog/assets/js/256.fc09c246.js"><link rel="prefetch" href="/vue-blog/assets/js/257.d4520721.js"><link rel="prefetch" href="/vue-blog/assets/js/258.588832dd.js"><link rel="prefetch" href="/vue-blog/assets/js/259.75c7103b.js"><link rel="prefetch" href="/vue-blog/assets/js/26.75c59681.js"><link rel="prefetch" href="/vue-blog/assets/js/260.d834f22d.js"><link rel="prefetch" href="/vue-blog/assets/js/261.67ef6123.js"><link rel="prefetch" href="/vue-blog/assets/js/262.b85b1751.js"><link rel="prefetch" href="/vue-blog/assets/js/263.a16eec63.js"><link rel="prefetch" href="/vue-blog/assets/js/264.d7221353.js"><link rel="prefetch" href="/vue-blog/assets/js/265.92f5c6c2.js"><link rel="prefetch" href="/vue-blog/assets/js/266.185cfbf1.js"><link rel="prefetch" href="/vue-blog/assets/js/267.fcf4dd24.js"><link rel="prefetch" href="/vue-blog/assets/js/268.1beb2810.js"><link rel="prefetch" href="/vue-blog/assets/js/269.ce41ac38.js"><link rel="prefetch" href="/vue-blog/assets/js/27.142f0040.js"><link rel="prefetch" href="/vue-blog/assets/js/270.ccceb3a0.js"><link rel="prefetch" href="/vue-blog/assets/js/271.d140c37e.js"><link rel="prefetch" href="/vue-blog/assets/js/272.2b714246.js"><link rel="prefetch" href="/vue-blog/assets/js/273.aa442ce2.js"><link rel="prefetch" href="/vue-blog/assets/js/274.190df847.js"><link rel="prefetch" href="/vue-blog/assets/js/275.edae0ad3.js"><link rel="prefetch" href="/vue-blog/assets/js/276.682dfbbb.js"><link rel="prefetch" href="/vue-blog/assets/js/277.a9accd4c.js"><link rel="prefetch" href="/vue-blog/assets/js/28.f1c65444.js"><link rel="prefetch" href="/vue-blog/assets/js/29.97c00b20.js"><link rel="prefetch" href="/vue-blog/assets/js/30.c5a0fdc6.js"><link rel="prefetch" href="/vue-blog/assets/js/31.f2ab80bf.js"><link rel="prefetch" href="/vue-blog/assets/js/32.e037e75b.js"><link rel="prefetch" href="/vue-blog/assets/js/33.9426bbd7.js"><link rel="prefetch" href="/vue-blog/assets/js/34.e1a75921.js"><link rel="prefetch" href="/vue-blog/assets/js/35.0a260607.js"><link rel="prefetch" href="/vue-blog/assets/js/36.c61cd8a1.js"><link rel="prefetch" href="/vue-blog/assets/js/37.aa17976f.js"><link rel="prefetch" href="/vue-blog/assets/js/38.2aea9580.js"><link rel="prefetch" href="/vue-blog/assets/js/39.6023ccc6.js"><link rel="prefetch" href="/vue-blog/assets/js/40.e2cfc5e3.js"><link rel="prefetch" href="/vue-blog/assets/js/41.2a346baf.js"><link rel="prefetch" href="/vue-blog/assets/js/42.c7be79b0.js"><link rel="prefetch" href="/vue-blog/assets/js/43.0e063f36.js"><link rel="prefetch" href="/vue-blog/assets/js/44.175eadca.js"><link rel="prefetch" href="/vue-blog/assets/js/45.a1e233be.js"><link rel="prefetch" href="/vue-blog/assets/js/46.cd819bb4.js"><link rel="prefetch" href="/vue-blog/assets/js/47.0fc3669f.js"><link rel="prefetch" href="/vue-blog/assets/js/48.07f47a58.js"><link rel="prefetch" href="/vue-blog/assets/js/49.d8393174.js"><link rel="prefetch" href="/vue-blog/assets/js/5.dd49d6e7.js"><link rel="prefetch" href="/vue-blog/assets/js/50.894e3abe.js"><link rel="prefetch" href="/vue-blog/assets/js/51.ac393080.js"><link rel="prefetch" href="/vue-blog/assets/js/52.a9d521e5.js"><link rel="prefetch" href="/vue-blog/assets/js/53.aa1bac24.js"><link rel="prefetch" href="/vue-blog/assets/js/54.94a68db7.js"><link rel="prefetch" href="/vue-blog/assets/js/55.bc4b4833.js"><link rel="prefetch" href="/vue-blog/assets/js/56.182b2c4a.js"><link rel="prefetch" href="/vue-blog/assets/js/57.7d719313.js"><link rel="prefetch" href="/vue-blog/assets/js/58.5350fdbc.js"><link rel="prefetch" href="/vue-blog/assets/js/59.12640bf0.js"><link rel="prefetch" href="/vue-blog/assets/js/6.6c305b86.js"><link rel="prefetch" href="/vue-blog/assets/js/60.7a14fa5a.js"><link rel="prefetch" href="/vue-blog/assets/js/61.9498c4b8.js"><link rel="prefetch" href="/vue-blog/assets/js/62.9f9713ea.js"><link rel="prefetch" href="/vue-blog/assets/js/63.47f18eaa.js"><link rel="prefetch" href="/vue-blog/assets/js/64.c1b212c5.js"><link rel="prefetch" href="/vue-blog/assets/js/65.f6a411df.js"><link rel="prefetch" href="/vue-blog/assets/js/66.d99b711d.js"><link rel="prefetch" href="/vue-blog/assets/js/67.e12b3562.js"><link rel="prefetch" href="/vue-blog/assets/js/68.39da4fcb.js"><link rel="prefetch" href="/vue-blog/assets/js/69.242b1ccb.js"><link rel="prefetch" href="/vue-blog/assets/js/7.309b7951.js"><link rel="prefetch" href="/vue-blog/assets/js/70.155ce70b.js"><link rel="prefetch" href="/vue-blog/assets/js/71.fef86de9.js"><link rel="prefetch" href="/vue-blog/assets/js/72.7165c1fb.js"><link rel="prefetch" href="/vue-blog/assets/js/73.2865bf05.js"><link rel="prefetch" href="/vue-blog/assets/js/74.96f29169.js"><link rel="prefetch" href="/vue-blog/assets/js/75.ebbdbc56.js"><link rel="prefetch" href="/vue-blog/assets/js/76.f7aedec0.js"><link rel="prefetch" href="/vue-blog/assets/js/77.961a0f44.js"><link rel="prefetch" href="/vue-blog/assets/js/78.64c54114.js"><link rel="prefetch" href="/vue-blog/assets/js/79.e52251f0.js"><link rel="prefetch" href="/vue-blog/assets/js/8.a59960f9.js"><link rel="prefetch" href="/vue-blog/assets/js/80.f5a4014d.js"><link rel="prefetch" href="/vue-blog/assets/js/81.00edaa87.js"><link rel="prefetch" href="/vue-blog/assets/js/82.ac9c6298.js"><link rel="prefetch" href="/vue-blog/assets/js/83.a8149eb7.js"><link rel="prefetch" href="/vue-blog/assets/js/84.d8cb322a.js"><link rel="prefetch" href="/vue-blog/assets/js/85.09369a1f.js"><link rel="prefetch" href="/vue-blog/assets/js/86.27714b75.js"><link rel="prefetch" href="/vue-blog/assets/js/87.2b204479.js"><link rel="prefetch" href="/vue-blog/assets/js/88.5d98c9dc.js"><link rel="prefetch" href="/vue-blog/assets/js/89.a93b1c7b.js"><link rel="prefetch" href="/vue-blog/assets/js/9.db5f1d69.js"><link rel="prefetch" href="/vue-blog/assets/js/90.d97578bc.js"><link rel="prefetch" href="/vue-blog/assets/js/91.cc71b6ee.js"><link rel="prefetch" href="/vue-blog/assets/js/92.3925927e.js"><link rel="prefetch" href="/vue-blog/assets/js/93.e288a587.js"><link rel="prefetch" href="/vue-blog/assets/js/94.73c1bc9b.js"><link rel="prefetch" href="/vue-blog/assets/js/95.f13d281f.js"><link rel="prefetch" href="/vue-blog/assets/js/96.b31d7be2.js"><link rel="prefetch" href="/vue-blog/assets/js/97.6f4e4b0f.js"><link rel="prefetch" href="/vue-blog/assets/js/98.e66a887d.js"><link rel="prefetch" href="/vue-blog/assets/js/99.be6e5c05.js"><link rel="prefetch" href="/vue-blog/assets/js/vendors~flowchart.be04a989.js">
    <link rel="stylesheet" href="/vue-blog/assets/css/0.styles.92d18fa1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>wxvirus</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>纯粹的浪荡人士与抱定决心干大事的人，面相是截然不同的。</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>无解</span>
            
          <span data-v-4e82dffc>2020 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-blog/" class="home-link router-link-active"><!----> <span class="site-name">wxvirus</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-blog/categories/Go-core/" class="nav-link"><i class="undefined"></i>
  Go-core
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/algorithm/" class="nav-link"><i class="undefined"></i>
  algorithm
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/architecture/" class="nav-link"><i class="undefined"></i>
  architecture
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/c/" class="nav-link"><i class="undefined"></i>
  c
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/demo/" class="nav-link"><i class="undefined"></i>
  demo
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/dubbo/" class="nav-link"><i class="undefined"></i>
  dubbo
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/designer/" class="nav-link"><i class="undefined"></i>
  designer
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/datastruct/" class="nav-link"><i class="undefined"></i>
  datastruct
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/front/" class="nav-link"><i class="undefined"></i>
  front
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/go-zero/" class="nav-link"><i class="undefined"></i>
  go-zero
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/go/" class="nav-link"><i class="undefined"></i>
  go
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/java/" class="nav-link"><i class="undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/k8s/" class="nav-link"><i class="undefined"></i>
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/memory/" class="nav-link"><i class="undefined"></i>
  memory
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/mybatis/" class="nav-link"><i class="undefined"></i>
  mybatis
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/net/" class="nav-link"><i class="undefined"></i>
  net
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/note/" class="nav-link"><i class="undefined"></i>
  note
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/php/" class="nav-link"><i class="undefined"></i>
  php
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/spring/" class="nav-link"><i class="undefined"></i>
  spring
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/springboot/" class="nav-link"><i class="undefined"></i>
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/springcloud/" class="nav-link"><i class="undefined"></i>
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/tools/" class="nav-link"><i class="undefined"></i>
  tools
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/vue3/" class="nav-link"><i class="undefined"></i>
  vue3
</a></li></ul></div></div><div class="nav-item"><a href="/vue-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/vue-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/vue-blog/about/" class="nav-link"><i class="iconfont reco-message"></i>
  关于我
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-menu"></i>
      快速访问🎈
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://leetcode-cn.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  LeetCode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Vue.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.oracle.com/javase/8/docs/api/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Java SE API Documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://spring.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Spring
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stackoverflow.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Stackoverflow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Linux命令大全
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/sword-demon/vue-blog" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/vue-blog/logo.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    无解
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>266</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>68</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/vue-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-blog/categories/Go-core/" class="nav-link"><i class="undefined"></i>
  Go-core
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/algorithm/" class="nav-link"><i class="undefined"></i>
  algorithm
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/architecture/" class="nav-link"><i class="undefined"></i>
  architecture
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/c/" class="nav-link"><i class="undefined"></i>
  c
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/demo/" class="nav-link"><i class="undefined"></i>
  demo
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/dubbo/" class="nav-link"><i class="undefined"></i>
  dubbo
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/designer/" class="nav-link"><i class="undefined"></i>
  designer
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/datastruct/" class="nav-link"><i class="undefined"></i>
  datastruct
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/front/" class="nav-link"><i class="undefined"></i>
  front
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/go-zero/" class="nav-link"><i class="undefined"></i>
  go-zero
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/go/" class="nav-link"><i class="undefined"></i>
  go
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/java/" class="nav-link"><i class="undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/k8s/" class="nav-link"><i class="undefined"></i>
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/memory/" class="nav-link"><i class="undefined"></i>
  memory
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/mybatis/" class="nav-link"><i class="undefined"></i>
  mybatis
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/net/" class="nav-link"><i class="undefined"></i>
  net
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/note/" class="nav-link"><i class="undefined"></i>
  note
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/php/" class="nav-link"><i class="undefined"></i>
  php
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/python/" class="nav-link"><i class="undefined"></i>
  python
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/spring/" class="nav-link"><i class="undefined"></i>
  spring
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/springboot/" class="nav-link"><i class="undefined"></i>
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/springcloud/" class="nav-link"><i class="undefined"></i>
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/tools/" class="nav-link"><i class="undefined"></i>
  tools
</a></li><li class="dropdown-item"><!----> <a href="/vue-blog/categories/vue3/" class="nav-link"><i class="undefined"></i>
  vue3
</a></li></ul></div></div><div class="nav-item"><a href="/vue-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/vue-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/vue-blog/about/" class="nav-link"><i class="iconfont reco-message"></i>
  关于我
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-menu"></i>
      快速访问🎈
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://leetcode-cn.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  LeetCode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Vue.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.oracle.com/javase/8/docs/api/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Java SE API Documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://spring.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Spring
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stackoverflow.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Stackoverflow
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.linuxcool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Linux命令大全
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/sword-demon/vue-blog" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-blog/python/autodiscover/" class="sidebar-link">Django启动时自动启动文件</a></li><li><a href="/vue-blog/djangoauth/" class="sidebar-link">Django用户认证组件</a></li><li><a href="/vue-blog/python/drf/serializer/" class="sidebar-link">Serializer学习</a></li><li><a href="/vue-blog/python/asyncio/case/" class="sidebar-link">asyncio实战案例</a></li><li><a href="/vue-blog/python/asyncio/" class="sidebar-link">asyncio异步编程</a></li><li><a href="/vue-blog/python/drf/" aria-current="page" class="active sidebar-link">Django restframework快速上手</a></li><li><a href="/vue-blog/python/drf/authz/" class="sidebar-link">认证</a></li><li><a href="/vue-blog/python/drf/limit/" class="sidebar-link">drf限流</a></li><li><a href="/vue-blog/python/jsonrpc/" class="sidebar-link">基于json的rpc的库</a></li><li><a href="/vue-blog/python/xmlrpc/" class="sidebar-link">基于xml的rpc的库</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Django restframework快速上手</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>无解</span>
            
          <span data-v-4e82dffc>2020 - </span>
          2022
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Django restframework快速上手</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>无解</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>9/27/2021</span></i> <i class="iconfont reco-eye" data-v-1ff7123e><span id="/vue-blog/python/drf/" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-1ff7123e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Django</span><span class="tag-item" data-v-1ff7123e>restframework</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="最少语言描述drf"><a href="#最少语言描述drf" class="header-anchor">#</a> 最少语言描述DRF</h2> <blockquote><p>将数据库的东西通过ORM的映射取出来，通过view和serializers文件绑定REST接口，当前端请求时，返回序列化好的json。</p> <p>DRF是Django的超集，去掉了模板的部分，提供了一个REST的接口，同时也提供了满足该接口的代码工作流。同时，在REST的规范下，升级了权限和分页等功能，增加了限流和过滤搜索等功能。</p></blockquote> <h2 id="快速上手"><a href="#快速上手" class="header-anchor">#</a> 快速上手</h2> <ul><li><p>安装</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>pip <span class="token function">install</span> <span class="token assign-left variable">djangorestframework</span><span class="token operator">=</span><span class="token number">3.12</span>.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>版本要求: djangorestframework=3.12.4
	Python (3.5,3.6,3.7,3.8,3.9)
	Django(2.2, 3.0, 3.1)
	
djangorestframework=3.11.2
Python (3.5,3.6,3.7,3.8)
Django(1.11, 2.0, 2.1, 2.2, 3.0)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>配置，在<code>settings.py</code>中添加配置</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
  	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  	<span class="token comment"># 注册 rest_framework</span>
    <span class="token string">'rest_framework'</span>
<span class="token punctuation">]</span>

<span class="token comment"># drf相关配置写在这里</span>
REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>URL和视图</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># urls.py</span>

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment"># path('admin/', admin.site.urls),</span>

    <span class="token comment"># path(&quot;api/&lt;str:version&gt;/users&quot;, views.users),</span>
    <span class="token comment"># path(&quot;api/&lt;str:version&gt;/users/&lt;int:pk&gt;&quot;, views.users),</span>

    path<span class="token punctuation">(</span><span class="token string">'users/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>UserView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># views.py</span>

<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response


<span class="token keyword">class</span> <span class="token class-name">UserView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul> <div class="custom-block tip"><p class="title"></p><p>其实drf框架是django基础进行的扩展，所以上述执行的底层实现流程还是和django的CBV类似。</p> <p>drf中重写了<code>as_view</code>和<code>dispatch</code>方法，就是在原来的django的功能的基础上加了一些功能</p> <ul><li><code>as_view</code>，免除了<code>csrf</code>的验证，前后端分离的项目一般不会使用<code>csrf_token</code>认证，会使用<code>jwt</code>认证</li> <li><code>dispatch</code>内部添加了版本处理、认证、权限、访问频率限制等诸多功能。</li></ul></div><p>现在运行的一个页面</p> <p><img src="/vue-blog/assets/images/drf_runtime.png" alt="image-20210927212831528"></p> <h2 id="请求数据的封装"><a href="#请求数据的封装" class="header-anchor">#</a> 请求数据的封装</h2> <p>以前Django开发，视图中的request是<code>django.core.handlers.wsgi.WSGIRequest</code>类的对象，包含了请求相关的所有数据。</p> <p>而使用drf框架时，视图的request是<code>rest_framework.request.Request</code>类的对象，其实又是对django的request进行了一次封装，包含了除django原request对象以外，还包含其他后期会使用的其他对象。</p> <p>内部包含了django的request、认证、解析器等。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>新的request对象 = (django的request, 其他数据)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>源码位置</p> <p><code>rest_framework.requset.Request</code>类</p></blockquote> <details class="custom-block details"><summary>点击查看Request源码</summary> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Request</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    Wrapper allowing to enhance a standard `HttpRequest` instance.

    Kwargs:
        - request(HttpRequest). The original request instance.
        - parsers(list/tuple). The parsers to use for parsing the
          request content.
        - authenticators(list/tuple). The authenticators used to try
          authenticating the request's user.
    &quot;&quot;&quot;</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> parsers<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> authenticators<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
                 negotiator<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> parser_context<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">assert</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> HttpRequest<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>
            <span class="token string">'The `request` argument must be an instance of '</span>
            <span class="token string">'`django.http.HttpRequest`, not `{}.{}`.'</span>
            <span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__module__<span class="token punctuation">,</span> request<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>_request <span class="token operator">=</span> request
        self<span class="token punctuation">.</span>parsers <span class="token operator">=</span> parsers <span class="token keyword">or</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>authenticators <span class="token operator">=</span> authenticators <span class="token keyword">or</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>negotiator <span class="token operator">=</span> negotiator <span class="token keyword">or</span> self<span class="token punctuation">.</span>_default_negotiator<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>parser_context <span class="token operator">=</span> parser_context
        self<span class="token punctuation">.</span>_data <span class="token operator">=</span> Empty
        self<span class="token punctuation">.</span>_files <span class="token operator">=</span> Empty
        self<span class="token punctuation">.</span>_full_data <span class="token operator">=</span> Empty
        self<span class="token punctuation">.</span>_content_type <span class="token operator">=</span> Empty
        self<span class="token punctuation">.</span>_stream <span class="token operator">=</span> Empty

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>parser_context <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>parser_context <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        self<span class="token punctuation">.</span>parser_context<span class="token punctuation">[</span><span class="token string">'request'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self
        self<span class="token punctuation">.</span>parser_context<span class="token punctuation">[</span><span class="token string">'encoding'</span><span class="token punctuation">]</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>encoding <span class="token keyword">or</span> settings<span class="token punctuation">.</span>DEFAULT_CHARSET

        force_user <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'_force_auth_user'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
        force_token <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'_force_auth_token'</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> force_user <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span> <span class="token keyword">or</span> force_token <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            forced_auth <span class="token operator">=</span> ForcedAuthentication<span class="token punctuation">(</span>force_user<span class="token punctuation">,</span> force_token<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>authenticators <span class="token operator">=</span> <span class="token punctuation">(</span>forced_auth<span class="token punctuation">,</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'&lt;%s.%s: %s %r&gt;'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>
            self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__module__<span class="token punctuation">,</span>
            self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span>
            self<span class="token punctuation">.</span>method<span class="token punctuation">,</span>
            self<span class="token punctuation">.</span>get_full_path<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">_default_negotiator</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> api_settings<span class="token punctuation">.</span>DEFAULT_CONTENT_NEGOTIATION_CLASS<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">content_type</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        meta <span class="token operator">=</span> self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>META
        <span class="token keyword">return</span> meta<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'CONTENT_TYPE'</span><span class="token punctuation">,</span> meta<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'HTTP_CONTENT_TYPE'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">stream</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Returns an object that may be used to stream the request content.
        &quot;&quot;&quot;</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> _hasattr<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_stream'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_load_stream<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_stream

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">query_params</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        More semantically correct name for request.GET.
        &quot;&quot;&quot;</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>GET

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> _hasattr<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_full_data'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_load_data_and_files<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_full_data

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">user</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Returns the user associated with the current request, as authenticated
        by the authentication classes provided to the request.
        &quot;&quot;&quot;</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_user'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">with</span> wrap_attributeerrors<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>_authenticate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_user

    <span class="token decorator annotation punctuation">@user<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">user</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Sets the user on the current request. This is necessary to maintain
        compatibility with django.contrib.auth where the user property is
        set in the login and logout functions.

        Note that we also set the user on Django's underlying `HttpRequest`
        instance, ensuring that it is available to any middleware in the stack.
        &quot;&quot;&quot;</span>
        self<span class="token punctuation">.</span>_user <span class="token operator">=</span> value
        self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>user <span class="token operator">=</span> value

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">auth</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Returns any non-user authentication information associated with the
        request, such as an authentication token.
        &quot;&quot;&quot;</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_auth'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">with</span> wrap_attributeerrors<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>_authenticate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_auth

    <span class="token decorator annotation punctuation">@auth<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">auth</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Sets any non-user authentication information associated with the
        request, such as an authentication token.
        &quot;&quot;&quot;</span>
        self<span class="token punctuation">.</span>_auth <span class="token operator">=</span> value
        self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>auth <span class="token operator">=</span> value

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">successful_authenticator</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Return the instance of the authentication instance class that was used
        to authenticate the request, or `None`.
        &quot;&quot;&quot;</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_authenticator'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">with</span> wrap_attributeerrors<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>_authenticate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_authenticator

    <span class="token keyword">def</span> <span class="token function">_load_data_and_files</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Parses the request content into `self.data`.
        &quot;&quot;&quot;</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> _hasattr<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_data'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_data<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_files <span class="token operator">=</span> self<span class="token punctuation">.</span>_parse<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>_files<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>_full_data <span class="token operator">=</span> self<span class="token punctuation">.</span>_data<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>_full_data<span class="token punctuation">.</span>update<span class="token punctuation">(</span>self<span class="token punctuation">.</span>_files<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>_full_data <span class="token operator">=</span> self<span class="token punctuation">.</span>_data

            <span class="token comment"># if a form media type, copy data &amp; files refs to the underlying</span>
            <span class="token comment"># http request so that closable objects are handled appropriately.</span>
            <span class="token keyword">if</span> is_form_media_type<span class="token punctuation">(</span>self<span class="token punctuation">.</span>content_type<span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>_post <span class="token operator">=</span> self<span class="token punctuation">.</span>POST
                self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>_files <span class="token operator">=</span> self<span class="token punctuation">.</span>FILES

    <span class="token keyword">def</span> <span class="token function">_load_stream</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Return the content body of the request, as a stream.
        &quot;&quot;&quot;</span>
        meta <span class="token operator">=</span> self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>META
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            content_length <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>
                meta<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'CONTENT_LENGTH'</span><span class="token punctuation">,</span> meta<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'HTTP_CONTENT_LENGTH'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token keyword">except</span> <span class="token punctuation">(</span>ValueError<span class="token punctuation">,</span> TypeError<span class="token punctuation">)</span><span class="token punctuation">:</span>
            content_length <span class="token operator">=</span> <span class="token number">0</span>

        <span class="token keyword">if</span> content_length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_stream <span class="token operator">=</span> <span class="token boolean">None</span>
        <span class="token keyword">elif</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>_read_started<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_stream <span class="token operator">=</span> self<span class="token punctuation">.</span>_request
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_stream <span class="token operator">=</span> io<span class="token punctuation">.</span>BytesIO<span class="token punctuation">(</span>self<span class="token punctuation">.</span>body<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">_supports_form_parsing</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Return True if this requests supports parsing form data.
        &quot;&quot;&quot;</span>
        form_media <span class="token operator">=</span> <span class="token punctuation">(</span>
            <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">,</span>
            <span class="token string">'multipart/form-data'</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">[</span>parser<span class="token punctuation">.</span>media_type <span class="token keyword">in</span> form_media <span class="token keyword">for</span> parser <span class="token keyword">in</span> self<span class="token punctuation">.</span>parsers<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">_parse</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Parse the request content, returning a two-tuple of (data, files)

        May raise an `UnsupportedMediaType`, or `ParseError` exception.
        &quot;&quot;&quot;</span>
        media_type <span class="token operator">=</span> self<span class="token punctuation">.</span>content_type
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            stream <span class="token operator">=</span> self<span class="token punctuation">.</span>stream
        <span class="token keyword">except</span> RawPostDataException<span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_request<span class="token punctuation">,</span> <span class="token string">'_post'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">raise</span>
            <span class="token comment"># If request.POST has been accessed in middleware, and a method='POST'</span>
            <span class="token comment"># request was made with 'multipart/form-data', then the request stream</span>
            <span class="token comment"># will already have been exhausted.</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>_supports_form_parsing<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span>
            stream <span class="token operator">=</span> <span class="token boolean">None</span>

        <span class="token keyword">if</span> stream <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> media_type <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> media_type <span class="token keyword">and</span> is_form_media_type<span class="token punctuation">(</span>media_type<span class="token punctuation">)</span><span class="token punctuation">:</span>
                empty_data <span class="token operator">=</span> QueryDict<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span>self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>_encoding<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                empty_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            empty_files <span class="token operator">=</span> MultiValueDict<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>empty_data<span class="token punctuation">,</span> empty_files<span class="token punctuation">)</span>

        parser <span class="token operator">=</span> self<span class="token punctuation">.</span>negotiator<span class="token punctuation">.</span>select_parser<span class="token punctuation">(</span>self<span class="token punctuation">,</span> self<span class="token punctuation">.</span>parsers<span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token keyword">not</span> parser<span class="token punctuation">:</span>
            <span class="token keyword">raise</span> exceptions<span class="token punctuation">.</span>UnsupportedMediaType<span class="token punctuation">(</span>media_type<span class="token punctuation">)</span>

        <span class="token keyword">try</span><span class="token punctuation">:</span>
            parsed <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>stream<span class="token punctuation">,</span> media_type<span class="token punctuation">,</span> self<span class="token punctuation">.</span>parser_context<span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception<span class="token punctuation">:</span>
            <span class="token comment"># If we get an exception during parsing, fill in empty data and</span>
            <span class="token comment"># re-raise.  Ensures we don't simply repeat the error when</span>
            <span class="token comment"># attempting to render the browsable renderer response, or when</span>
            <span class="token comment"># logging the request or similar.</span>
            self<span class="token punctuation">.</span>_data <span class="token operator">=</span> QueryDict<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span>self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>_encoding<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>_files <span class="token operator">=</span> MultiValueDict<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>_full_data <span class="token operator">=</span> self<span class="token punctuation">.</span>_data
            <span class="token keyword">raise</span>

        <span class="token comment"># Parser classes may return the raw data, or a</span>
        <span class="token comment"># DataAndFiles object.  Unpack the result as required.</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>parsed<span class="token punctuation">.</span>data<span class="token punctuation">,</span> parsed<span class="token punctuation">.</span>files<span class="token punctuation">)</span>
        <span class="token keyword">except</span> AttributeError<span class="token punctuation">:</span>
            empty_files <span class="token operator">=</span> MultiValueDict<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>parsed<span class="token punctuation">,</span> empty_files<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">_authenticate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Attempt to authenticate the request using each authentication instance
        in turn.
        &quot;&quot;&quot;</span>
        <span class="token keyword">for</span> authenticator <span class="token keyword">in</span> self<span class="token punctuation">.</span>authenticators<span class="token punctuation">:</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                user_auth_tuple <span class="token operator">=</span> authenticator<span class="token punctuation">.</span>authenticate<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
            <span class="token keyword">except</span> exceptions<span class="token punctuation">.</span>APIException<span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>_not_authenticated<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">raise</span>

            <span class="token keyword">if</span> user_auth_tuple <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>_authenticator <span class="token operator">=</span> authenticator
                self<span class="token punctuation">.</span>user<span class="token punctuation">,</span> self<span class="token punctuation">.</span>auth <span class="token operator">=</span> user_auth_tuple
                <span class="token keyword">return</span>

        self<span class="token punctuation">.</span>_not_authenticated<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">_not_authenticated</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Set authenticator, user &amp; authtoken representing an unauthenticated request.

        Defaults are None, AnonymousUser &amp; None.
        &quot;&quot;&quot;</span>
        self<span class="token punctuation">.</span>_authenticator <span class="token operator">=</span> <span class="token boolean">None</span>

        <span class="token keyword">if</span> api_settings<span class="token punctuation">.</span>UNAUTHENTICATED_USER<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>user <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>UNAUTHENTICATED_USER<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>user <span class="token operator">=</span> <span class="token boolean">None</span>

        <span class="token keyword">if</span> api_settings<span class="token punctuation">.</span>UNAUTHENTICATED_TOKEN<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>auth <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>UNAUTHENTICATED_TOKEN<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>auth <span class="token operator">=</span> <span class="token boolean">None</span>

    <span class="token keyword">def</span> <span class="token function">__getattr__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> attr<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        If an attribute does not exist on this instance, then we also attempt
        to proxy it to the underlying HttpRequest object.
        &quot;&quot;&quot;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_request<span class="token punctuation">,</span> attr<span class="token punctuation">)</span>
        <span class="token keyword">except</span> AttributeError<span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>__getattribute__<span class="token punctuation">(</span>attr<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">DATA</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> NotImplementedError<span class="token punctuation">(</span>
            <span class="token string">'`request.DATA` has been deprecated in favor of `request.data` '</span>
            <span class="token string">'since version 3.0, and has been fully removed as of version 3.2.'</span>
        <span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">POST</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Ensure that request.POST uses our request parsing.</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> _hasattr<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_data'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_load_data_and_files<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> is_form_media_type<span class="token punctuation">(</span>self<span class="token punctuation">.</span>content_type<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>_data
        <span class="token keyword">return</span> QueryDict<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span>self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>_encoding<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">FILES</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Leave this one alone for backwards compat with Django's request.FILES</span>
        <span class="token comment"># Different from the other two cases, which are not valid property</span>
        <span class="token comment"># names on the WSGIRequest class.</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> _hasattr<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_files'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_load_data_and_files<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_files

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">QUERY_PARAMS</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> NotImplementedError<span class="token punctuation">(</span>
            <span class="token string">'`request.QUERY_PARAMS` has been deprecated in favor of `request.query_params` '</span>
            <span class="token string">'since version 3.0, and has been fully removed as of version 3.2.'</span>
        <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">force_plaintext_errors</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Hack to allow our exception handler to force choice of</span>
        <span class="token comment"># plaintext or html error responses.</span>
        self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>is_ajax <span class="token operator">=</span> <span class="token keyword">lambda</span><span class="token punctuation">:</span> value
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br></div></div><p>所以在使用drf的框架的requet的时候，会有一些不同，例如：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># Create your views here.</span>
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response


<span class="token keyword">class</span> <span class="token class-name">UserView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 通过对象的嵌套直接找到request，读取相关值</span>
        request<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>method
        request<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>GET
        request<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>POST
        request<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>body

        <span class="token comment"># 直接去读新request对象中的值，一般此处会对原始数据的进行处理，方便在视图函数里使用</span>
        request<span class="token punctuation">.</span>query_params    <span class="token comment"># 内部本质上就是 request._request.GET</span>
        request<span class="token punctuation">.</span>data <span class="token comment"># 内部读取请求体中的数据，并进行处理，对请求者发送来的JSON会对JSON字符串进行反序列化</span>
        
        <span class="token comment"># 通过 __getattr__ 去访问reqeust._request 中的值</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></details> <p>drf内部会根据请求头<code>content-type</code>来进行内部处理数据然后组装完了扔到request里，方便我们进行使用。</p> <p><code>__getattr__</code>什么时候触发？</p> <p>当你调用了<code>reqeust.属性</code>就会去调用</p> <details class="custom-block details"><summary>点击查看代码</summary> <p>源码</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">__getattr__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> attr<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        If an attribute does not exist on this instance, then we also attempt
        to proxy it to the underlying HttpRequest object.
        &quot;&quot;&quot;</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_request<span class="token punctuation">,</span> attr<span class="token punctuation">)</span>
        <span class="token keyword">except</span> AttributeError<span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>__getattribute__<span class="token punctuation">(</span>attr<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></details> <div class="language-python line-numbers-mode"><pre class="language-python"><code>request<span class="token punctuation">.</span>method <span class="token operator">=</span><span class="token operator">&gt;</span> self<span class="token punctuation">.</span>_request<span class="token punctuation">.</span>method
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="版本管理"><a href="#版本管理" class="header-anchor">#</a> 版本管理</h2> <p>在restful规范中，后端的API需要体现版本</p> <p><code>drf</code>框架中支持5种版本的设置</p> <h3 id="get请求获取"><a href="#get请求获取" class="header-anchor">#</a> GET请求获取</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># views.py</span>

<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>versioning <span class="token keyword">import</span> QueryParameterVersioning
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response


<span class="token keyword">class</span> <span class="token class-name">UserView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    versioning_class <span class="token operator">=</span> QueryParameterVersioning

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># urls.py</span>

<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path
<span class="token keyword">from</span> app01 <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment"># path('admin/', admin.site.urls),</span>

    <span class="token comment"># path(&quot;api/&lt;str:version&gt;/users&quot;, views.users),</span>
    <span class="token comment"># path(&quot;api/&lt;str:version&gt;/users/&lt;int:pk&gt;&quot;, views.users),</span>

    path<span class="token punctuation">(</span><span class="token string">'api/users/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>UserView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>在浏览器中输入地址：http://127.0.0.1:8000/api/users/?version=v1</p> <p>此时终端会输出一个对应的版本号：<strong>v1</strong></p> <div class="custom-block danger"><p class="title"></p><p>注意，浏览器输入的<code>version=v几</code>的<code>version</code>是固定的</p></div><p>那么可以不可以修改呢，毕竟<code>version</code>要输入这么一长串</p> <details class="custom-block details"><summary>看下`QueryParameterVersioning`的源码的父类`BaseVersioning`</summary> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">BaseVersioning</span><span class="token punctuation">:</span>
    default_version <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>DEFAULT_VERSION
    allowed_versions <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>ALLOWED_VERSIONS
    version_param <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>VERSION_PARAM
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></details> <p>其中的<code>VERSION_PARAM</code>，我们可以拿出来放到配置文件里，我们重新设置一下内容</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># settings.py</span>

<span class="token comment"># 之前说的drf的框架的配置文件都放在这个里面</span>
REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;VERSION_PARAM&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;v&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>写成这个时，后面浏览器写的时候传入的版本就得写：http://127.0.0.1:8000/api/users/?v=v1</p> <div class="custom-block danger"><p class="title"></p><p>此时如果你还写成<code>version</code>就不行</p></div><p>如果想设置一个默认值的版本，就是你不想写后面一串，如何设置一个默认值的版本？</p> <p>还是看上面的源码部分，里面有一个<code>DEFAULT_VERSION</code>看英文就知道是啥意思了。配置一下这个的默认值即可</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># settings.py</span>

REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;VERSION_PARAM&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;v&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;DEFAULT_VERSION&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token comment"># 设置默认版本为v1</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>看到源码里还有一个<code>ALLOWED_VERSIONS</code>没用上，那肯定还是有用的啊，这个从字面上看就是可以允许的版本，我们可以进行限制一些版本名称</p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># settings.py</span>

REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;VERSION_PARAM&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;v&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;DEFAULT_VERSION&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token comment"># 设置默认版本为v1</span>
  <span class="token string">&quot;ALLOWED_VERSIONS&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v3&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block danger"><p class="title"></p><p>此时浏览器只能传入<code>v1、v2、v3</code>，其余的就会出错</p></div><h3 id="省事教程"><a href="#省事教程" class="header-anchor">#</a> 省事教程</h3> <p>此时，如果有多个视图，<code>versioning_class = QueryParameterVersioning</code>这一句是不是要在很多个视图类里都要写一遍。是的，很麻烦，<code>drf</code>还提供了一个解决办法。</p> <p><code>全局配置</code></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># settings.py</span>

REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;VERSION_PARAM&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;v&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFAULT_VERSION&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span>  <span class="token comment"># 设置默认版本为v1</span>
    <span class="token string">&quot;ALLOWED_VERSIONS&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v3&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DEFAULT_VERSIONING_CLASS&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;rest_framework.versioning.QueryParameterVersioning&quot;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><details class="custom-block details"><summary>查看源码位置</summary> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">APIView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># The following policies may be set at either globally, or per-view.</span>
    renderer_classes <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>DEFAULT_RENDERER_CLASSES
    parser_classes <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>DEFAULT_PARSER_CLASSES
    authentication_classes <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>DEFAULT_AUTHENTICATION_CLASSES
    throttle_classes <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>DEFAULT_THROTTLE_CLASSES
    permission_classes <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>DEFAULT_PERMISSION_CLASSES
    content_negotiation_class <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>DEFAULT_CONTENT_NEGOTIATION_CLASS
    metadata_class <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>DEFAULT_METADATA_CLASS
    versioning_class <span class="token operator">=</span> api_settings<span class="token punctuation">.</span>DEFAULT_VERSIONING_CLASS <span class="token comment"># 此处</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details> <h3 id="url路径传递"><a href="#url路径传递" class="header-anchor">#</a> URL路径传递(*)</h3> <p><code>urls.py</code></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>path<span class="token punctuation">(</span><span class="token string">'api/&lt;str:version&gt;/users/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>UserView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时视图函数内需要变更配置</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>versioning <span class="token keyword">import</span> URLPathVersioning


<span class="token keyword">class</span> <span class="token class-name">UserView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    versioning_class <span class="token operator">=</span> URLPathVersioning

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>使用此方法后，前面的配置的<code>REST_FRAMEWORK</code>里的版本名称，也得和这里的<code>url</code>参数传递的一样为<code>version</code>,这也支持配置全局的地方进行使用。</p> <h3 id="请求头传递"><a href="#请求头传递" class="header-anchor">#</a> 请求头传递</h3> <p>去<code>headers</code>请求头里获取版本信息</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Accept&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/json;version=v3&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/vue-blog/assets/images/image-20211003195826500.png" alt="image-20211003195826500"></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># Create your views here.</span>
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>versioning <span class="token keyword">import</span> QueryParameterVersioning<span class="token punctuation">,</span> URLPathVersioning<span class="token punctuation">,</span> AcceptHeaderVersioning
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response


<span class="token keyword">class</span> <span class="token class-name">UserView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># versioning_class = QueryParameterVersioning</span>
    <span class="token comment"># versioning_class = URLPathVersioning</span>
    versioning_class <span class="token operator">=</span> AcceptHeaderVersioning

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><details class="custom-block details"><summary>查看源码</summary> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AcceptHeaderVersioning</span><span class="token punctuation">(</span>BaseVersioning<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    GET /something/ HTTP/1.1
    Host: example.com
    Accept: application/json; version=1.0
    &quot;&quot;&quot;</span>
    invalid_version_message <span class="token operator">=</span> _<span class="token punctuation">(</span><span class="token string">'Invalid version in &quot;Accept&quot; header.'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">determine_version</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        media_type <span class="token operator">=</span> _MediaType<span class="token punctuation">(</span>request<span class="token punctuation">.</span>accepted_media_type<span class="token punctuation">)</span>
        version <span class="token operator">=</span> media_type<span class="token punctuation">.</span>params<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>version_param<span class="token punctuation">,</span> self<span class="token punctuation">.</span>default_version<span class="token punctuation">)</span>
        version <span class="token operator">=</span> unicode_http_header<span class="token punctuation">(</span>version<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>is_allowed_version<span class="token punctuation">(</span>version<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> exceptions<span class="token punctuation">.</span>NotAcceptable<span class="token punctuation">(</span>self<span class="token punctuation">.</span>invalid_version_message<span class="token punctuation">)</span>
        <span class="token keyword">return</span> version

    <span class="token comment"># We don't need to implement `reverse`, as the versioning is based</span>
    <span class="token comment"># on the `Accept` header, not on the request URL.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></details> <h3 id="二级域名传递"><a href="#二级域名传递" class="header-anchor">#</a> 二级域名传递</h3> <p>效果就是 <code>v1.xxx.com:8000/api/users</code></p> <p>直接就在二级域名前加上版本 信息</p> <p>视图函数修改配置</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># Create your views here.</span>
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>versioning <span class="token keyword">import</span> QueryParameterVersioning<span class="token punctuation">,</span> URLPathVersioning<span class="token punctuation">,</span> AcceptHeaderVersioning<span class="token punctuation">,</span> \
    HostNameVersioning
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response


<span class="token keyword">class</span> <span class="token class-name">UserView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># versioning_class = QueryParameterVersioning</span>
    <span class="token comment"># versioning_class = URLPathVersioning</span>
    <span class="token comment"># versioning_class = AcceptHeaderVersioning</span>
    versioning_class <span class="token operator">=</span> HostNameVersioning

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="custom-block tip"><p class="title"></p><p>自己如何想测试的话，<code>windows</code>的可以去修改hosts添加配置项</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>127.0.0.1 v1.xxx.com
127.0.0.1 v2.xxx.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div><p>同样<code>mac</code>也是如此，但是<code>mac</code>需要获取到<code>root</code>权限才能去修改</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">su</span> - 

<span class="token comment"># 然后输入你的密码</span>

<span class="token function">vim</span> /etc/hosts <span class="token comment"># 应该是这个地址的。然后去添加上面的2个二级域名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>然后根据视图函数里的配置的信息，去测试请求获取的版本信息</p> <h3 id="路由的namespace传递"><a href="#路由的namespace传递" class="header-anchor">#</a> 路由的namespace传递</h3> <p><code>urls.py</code>需要做出修改</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include
<span class="token keyword">from</span> app01 <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment"># path('admin/', admin.site.urls),</span>

    <span class="token comment"># path(&quot;api/&lt;str:version&gt;/users&quot;, views.users),</span>
    <span class="token comment"># path(&quot;api/&lt;str:version&gt;/users/&lt;int:pk&gt;&quot;, views.users),</span>

    <span class="token comment"># path('api/users/', views.UserView.as_view()),</span>
    path<span class="token punctuation">(</span><span class="token string">'api/v1'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'app01.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'v1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'api/v2'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'app01.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'v2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>视图函数对应的修改配置</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># Create your views here.</span>
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>versioning <span class="token keyword">import</span> QueryParameterVersioning<span class="token punctuation">,</span> URLPathVersioning<span class="token punctuation">,</span> AcceptHeaderVersioning<span class="token punctuation">,</span> \
    HostNameVersioning<span class="token punctuation">,</span> NamespaceVersioning
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response


<span class="token keyword">class</span> <span class="token class-name">UserView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># versioning_class = QueryParameterVersioning</span>
    <span class="token comment"># versioning_class = URLPathVersioning</span>
    <span class="token comment"># versioning_class = AcceptHeaderVersioning</span>
    <span class="token comment"># versioning_class = HostNameVersioning</span>
    versioning_class <span class="token operator">=</span> NamespaceVersioning

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="反向生成url"><a href="#反向生成url" class="header-anchor">#</a> 反向生成URL</h3> <p>在每个版本处理的类中还定义了<code>reverse</code>方法， 它是用来反向生成URL并携带相关的版本信息用的。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>versioning <span class="token keyword">import</span> QueryParameterVersioning
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response


<span class="token keyword">class</span> <span class="token class-name">UserView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    versioning_class <span class="token operator">=</span> QueryParameterVersioning

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
        <span class="token comment"># 反向生成URL</span>
        url1 <span class="token operator">=</span> request<span class="token punctuation">.</span>versioning_scheme<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token string">&quot;u1&quot;</span><span class="token punctuation">,</span> request<span class="token operator">=</span>request<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>url1<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><details class="custom-block details"><summary>某一个reverse源码</summary> <div class="language-python line-numbers-mode"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">reverse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> viewname<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> request<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>extra<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reverse<span class="token punctuation">(</span>
            viewname<span class="token punctuation">,</span> args<span class="token punctuation">,</span> kwargs<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token punctuation">,</span> <span class="token operator">**</span>extra
        <span class="token punctuation">)</span>
        <span class="token keyword">if</span> request<span class="token punctuation">.</span>version <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> replace_query_param<span class="token punctuation">(</span>url<span class="token punctuation">,</span> self<span class="token punctuation">.</span>version_param<span class="token punctuation">,</span> request<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
        <span class="token keyword">return</span> url
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></details> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>使用<code>drf</code>框架开发后端的<code>API</code>接口时：</p> <ul><li>首先创建Django项目</li> <li>安装drf框架</li> <li>创建一个app专门来处理用户请求</li> <li>注册app</li> <li>设置版本</li> <li>编写视图类</li></ul></div></section> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/sword-demon/vue-blog/edit/main/docs/views/python/drf快速上手.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新时间: </span> <span class="time">10/3/2021, 8:31:37 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/vue-blog/python/asyncio/" class="prev">
            asyncio异步编程
          </a></span> <span class="next"><a href="/vue-blog/python/drf/authz/">
            认证
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/vue-blog/python/drf/#最少语言描述drf" class="sidebar-link reco-side-最少语言描述drf" data-v-70334359>最少语言描述DRF</a></li><li class="level-2" data-v-70334359><a href="/vue-blog/python/drf/#快速上手" class="sidebar-link reco-side-快速上手" data-v-70334359>快速上手</a></li><li class="level-2" data-v-70334359><a href="/vue-blog/python/drf/#请求数据的封装" class="sidebar-link reco-side-请求数据的封装" data-v-70334359>请求数据的封装</a></li><li class="level-2" data-v-70334359><a href="/vue-blog/python/drf/#版本管理" class="sidebar-link reco-side-版本管理" data-v-70334359>版本管理</a></li><li class="level-3" data-v-70334359><a href="/vue-blog/python/drf/#get请求获取" class="sidebar-link reco-side-get请求获取" data-v-70334359>GET请求获取</a></li><li class="level-3" data-v-70334359><a href="/vue-blog/python/drf/#省事教程" class="sidebar-link reco-side-省事教程" data-v-70334359>省事教程</a></li><li class="level-3" data-v-70334359><a href="/vue-blog/python/drf/#url路径传递" class="sidebar-link reco-side-url路径传递" data-v-70334359>URL路径传递(*)</a></li><li class="level-3" data-v-70334359><a href="/vue-blog/python/drf/#请求头传递" class="sidebar-link reco-side-请求头传递" data-v-70334359>请求头传递</a></li><li class="level-3" data-v-70334359><a href="/vue-blog/python/drf/#二级域名传递" class="sidebar-link reco-side-二级域名传递" data-v-70334359>二级域名传递</a></li><li class="level-3" data-v-70334359><a href="/vue-blog/python/drf/#路由的namespace传递" class="sidebar-link reco-side-路由的namespace传递" data-v-70334359>路由的namespace传递</a></li><li class="level-3" data-v-70334359><a href="/vue-blog/python/drf/#反向生成url" class="sidebar-link reco-side-反向生成url" data-v-70334359>反向生成URL</a></li><li class="level-2" data-v-70334359><a href="/vue-blog/python/drf/#总结" class="sidebar-link reco-side-总结" data-v-70334359>总结</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div></div></div>
    <script src="/vue-blog/assets/js/app.f1f1676c.js" defer></script><script src="/vue-blog/assets/js/4.cb98655f.js" defer></script><script src="/vue-blog/assets/js/1.5cf0eecc.js" defer></script><script src="/vue-blog/assets/js/219.d7169c24.js" defer></script>
  </body>
</html>
